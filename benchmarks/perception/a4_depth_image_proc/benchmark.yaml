description: "The [depth_image_proc](https://github.com/ros-perception/image_pipeline/tree/humble/depth_image_proc)\
  \ package computes a point cloud using a rectified depth image and a rectified color\
  \ image. \n"
graph: /imgs/a3_stereo_image_proc_graph.png
id: a4
name: a4_depth_image_proc
reproduction: "## ------- Installation -------\n# Create a ROS 2 overlay workspace\n\
  mkdir -p /tmp/benchmark_ws/src\n\n# Clone the benchmark repository\ncd /tmp/benchmark_ws/src\
  \ && git clone https://github.com/robotperf/benchmarks\n\n# Fetch dependencies\n\
  source /opt/ros/humble/setup.bash\ncd /tmp/benchmark_ws && sudo rosdep update ||\
  \ true && sudo apt-get update &&\n  sudo rosdep install --from-paths src --ignore-src\
  \ --rosdistro humble -y\n\n# Build the benchmark\ncolcon build --merge-install --packages-up-to\
  \ a4_depth_image_proc\n\n# Terminal 1: Replay rosbag in a loop (within rosbags repo)\n\
  cd /path/to/rosbags/perception\nros2 bag play --loop depth_image1\n\n# Verify you\
  \ are working in the workspace\ncd /tmp/benchmark_ws\n\n# Source the workspace as\
  \ an overlay\nsource install/setup.bash\n\n# Terminal 2: Run Stereo Image Proc Benchmark\n\
  ros2 launch a4_depth_image_proc trace_a4_depth_image_proc.launch.py\n\n# Verify\
  \ data was collected\ncd ~/.ros/tracing\nbabeltrace a4_depth_image_proc | less\n\
  \n# Analyze Data\nros2 launch a4_depth_image_proc analyze_a4_depth_image_proc.launch.py\n\
  \n# Optional: Visualize benchmark process while it's running using this script\n\
  chmod +x src/benchmarks/benchmarks/perception/a4_depth_image_proc/scripts/visualize_benchmark.sh\n\
  ./src/benchmarks/benchmarks/perception/a4_depth_image_proc/scripts/visualize_benchmark.sh\n\
  \n## ------- Reproduce Simulation -------\ncd /tmp/benchmark_ws\n\n# Source\nsource\
  \ install/setup.bash\n\n# Terminal 1: Launch Simulation\ncd /tmp/benchmark_ws \n\
  ros2 launch a4_depth_image_proc launch_sim.launch.py world:=src/benchmarks/benchmarks/perception/a4_depth_image_proc/worlds/parking_garage.world\n\
  \n# Terminal 2: Visualize perception from robot's perspective using rviz\nrviz2\
  \ -d src/benchmarks/benchmarks/perception/a4_depth_image_proc/config/sim_depth_camera_bot.rviz\n\
  \n# Terminal 3: Record a rosbag (ctrl+c to end recording)\nros2 bag record -a\n\n\
  # Terminal 4: Use keyboard to drive robot around world\nros2 run teleop_twist_keyboard\
  \ teleop_twist_keyboard\n\n# Verify: Play back rosbag after recording it in a loop\n\
  ros2 bag play --loop /path/to/bag/directory/\n"
results:
- result:
    category: edge
    datasource: perception/depth_image1
    hardware: 12th Gen Intel(R) Core(TM) i9-12900KF
    metric: latency
    metric_unit: ms
    note: 'Mean: 37.09 ms,  RMS: 65.12 ms, Max: 939.43 ms, Min: 7.97 ms over 1147
      samples.'
    timestampt: 26-04-2023
    type: grey
    value: 939.43
- result:
    category: edge
    datasource: perception/depth_image1
    hardware: NVIDIA AGX Orin Dev. Kit
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-06-30 20:37:42'
    type: black
    value: 11.513117790222168
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: mean_benchmark 52.36187717005076, rms_benchmark 67.83441415522553, max_benchmark
      492.41293299999995, min_benchmark 15.982555999999999, lost messages 1.14 %
    timestampt: '2023-07-01 18:52:57'
    type: grey
    value: 492.41293299999995
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-01 18:56:07'
    type: grey
    value: 10.32787799835205
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: mean_benchmark 10.01179515336643, rms_benchmark 10.053770754687228, max_benchmark
      14.56166787712958, min_benchmark 1.401752375219967, lost messages 1.14 %
    timestampt: '2023-07-01 18:59:21'
    type: grey
    value: 14.56166787712958
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: mean_benchmark 24.904020833333334, rms_benchmark 25.9619138102967, max_benchmark
      56.589352000000005, min_benchmark 15.475099000000002, lost messages 0.00 %
    timestampt: '2023-07-01 19:02:52'
    type: grey
    value: 56.589352000000005
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-01 19:06:20'
    type: grey
    value: 20.117462158203125
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: mean_benchmark 30.164149180490657, rms_benchmark 30.17906066071334, max_benchmark
      34.984497844237744, min_benchmark 29.23188800258132, lost messages 0.00 %
    timestampt: '2023-07-01 19:09:30'
    type: grey
    value: 34.984497844237744
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: mean_benchmark 27.460619466666667, rms_benchmark 27.531410528435206, max_benchmark
      32.137471999999995, min_benchmark 23.952776, lost messages 0.00 %
    timestampt: '2023-07-01 19:12:48'
    type: black
    value: 32.137471999999995
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-01 19:16:17'
    type: black
    value: 22.733518600463867
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: mean_benchmark 30.002004606407837, rms_benchmark 30.016899528253816, max_benchmark
      32.56260364066182, min_benchmark 28.05284763755054, lost messages 0.00 %
    timestampt: '2023-07-01 19:20:02'
    type: black
    value: 32.56260364066182
- result:
    category: workstation
    datasource: perception/image
    hardware: AMD Ryzen 5 PRO 4650G
    metric: power
    metric_unit: W
    note: "\u270B "
    timestampt: '2023-07-04 20:31:59'
    type: grey
    value: 4.433058738708496
- result:
    category: workstation
    datasource: perception/image
    hardware: AMD Ryzen 5 PRO 4650G
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-04 20:38:55'
    type: grey
    value: 5.608436107635498
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: "\u270B mean_benchmark 52.86061100765306, rms_benchmark 69.18327305966089,\
      \ max_benchmark 491.570981, min_benchmark 15.885496, lost messages 0.64 %"
    timestampt: '2023-07-04 21:12:12'
    type: grey
    value: 491.570981
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: "\u270B "
    timestampt: '2023-07-04 21:15:36'
    type: grey
    value: 10.352216720581055
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: "\u270B mean_benchmark 10.018792680515206, rms_benchmark 10.060285168123452,\
      \ max_benchmark 13.402456053681657, min_benchmark 2.4505076243697257, lost messages\
      \ 0.64 %"
    timestampt: '2023-07-04 21:19:12'
    type: grey
    value: 13.402456053681657
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: mean_benchmark 24.92899356666666, rms_benchmark 25.249646499466923, max_benchmark
      35.401984999999996, min_benchmark 15.85738, lost messages 0.00 %
    timestampt: '2023-07-04 21:21:42'
    type: grey
    value: 35.401984999999996
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-04 21:25:12'
    type: grey
    value: 19.50750160217285
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: mean_benchmark 30.458207912685904, rms_benchmark 30.555029612781016, max_benchmark
      43.240244006426536, min_benchmark 29.42664420197415, lost messages 0.00 %
    timestampt: '2023-07-04 21:28:41'
    type: grey
    value: 43.240244006426536
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: mean_latency 38.461124208, rms_latency 40.15482851254003, max_latency 92.668831,
      min_latency 20.937459, lost messages 0.00 %
    timestampt: '2023-07-04 21:32:10'
    type: black
    value: 92.668831
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: lost messages 0.00 %
    timestampt: '2023-07-04 21:35:29'
    type: black
    value: 22.755641555786134
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: lost messages 0.00 %
    timestampt: '2023-07-04 21:38:47'
    type: black
    value: 30.152673846639914
- result:
    category: workstation
    datasource: perception/image
    hardware: AMD Ryzen 5 PRO 4650G
    metric: power
    metric_unit: W
    note: "\u270B "
    timestampt: '2023-07-05 04:45:29'
    type: grey
    value: 4.234061241149902
- result:
    category: workstation
    datasource: perception/image
    hardware: AMD Ryzen 5 PRO 4650G
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-05 04:52:17'
    type: grey
    value: 5.354733467102051
short: Perception computational graph to compute a point cloud using a rectified depth
  image and a rectified color image.
