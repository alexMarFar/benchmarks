description: 'The [stereo_image_proc](https://github.com/ros-perception/image_pipeline/tree/humble/stereo_image_proc)
  package computes the disparity map using a left and right image. A disparity map
  represents the difference in pixel position between corresponding points in the
  stereo images. Disparity images are images that show the difference in displacement
  or distance between corresponding points in a pair of stereo images. Stereo images
  are two images of the same scene taken from slightly different viewpoints, such
  as from the left and right eyes of a human observer or from two cameras. Disparity
  images are often used in computer vision and image processing applications, such
  as 3D reconstruction, depth estimation, and object recognition. By analyzing the
  disparities between corresponding points in stereo images, it is possible to infer
  the depth of objects in the scene and create a 3D representation of the environment.

  A simple perception computational graph composed by 2 Components, `rectify` and
  `resize` operations. Used to demonstrate a simple perception pipeline using the  package.

  '
graph: /imgs/a3_stereo_image_proc_graph.png
id: a3
name: a3_stereo_image_proc
reproduction: "## ------- Installation -------\n# Create a ROS 2 overlay workspace\n\
  mkdir -p /tmp/benchmark_ws/src\n\n# Clone the benchmark repository\ncd /tmp/benchmark_ws/src\
  \ && git clone https://github.com/robotperf/benchmarks\n\n# Fetch dependencies\n\
  source /opt/ros/humble/setup.bash\ncd /tmp/benchmark_ws && sudo rosdep update ||\
  \ true && sudo apt-get update &&\n  sudo rosdep install --from-paths src --ignore-src\
  \ --rosdistro humble -y\n\n# Build the benchmark\ncolcon build --merge-install --packages-up-to\
  \ a3_stereo_image_proc\n\n# Terminal 1: Replay rosbag in a loop (within rosbags\
  \ repo)\ncd /path/to/rosbags/perception\nros2 bag play --loop image3\n\n# Verify\
  \ you are working in the workspace\ncd /tmp/benchmark_ws\n\n# Source the workspace\
  \ as an overlay\nsource install/setup.bash\n\n# Terminal 2: Run Stereo Image Proc\
  \ Benchmark\nros2 launch a3_stereo_image_proc trace_a3_stereo_image_proc.launch.py\n\
  \n# Verify data was collected\ncd ~/.ros/tracing\nbabeltrace a3_stereo_image_proc\
  \ | less\n\n# Analyze Data\nros2 launch a3_stereo_image_proc analyze_a3_stereo_image_proc.launch.py\n\
  \n# Optional: Visualize benchmark process while it's running using this script\n\
  chmod +x src/benchmarks/benchmarks/perception/a3_stereo_image_proc/scripts/visualize_benchmark.sh\n\
  ./src/benchmarks/benchmarks/perception/a3_stereo_image_proc/scripts/visualize_benchmark.sh\n\
  \n## ------- Reproduce Simulation -------\ncd /tmp/benchmark_ws\n\n# Source\nsource\
  \ install/setup.bash\n\n# Terminal 1: Launch Simulation\ncd /tmp/benchmark_ws \n\
  ros2 launch a3_stereo_image_proc launch_sim.launch.py world:=src/benchmarks/benchmarks/perception/a3_stereo_image_proc/worlds/neighborhood.world\n\
  \n# Terminal 2: Visualize perception from robot's perspective using rviz\nrviz2\
  \ -d src/benchmarks/benchmarks/perception/a3_stereo_image_proc/config/camera_bot.rviz\n\
  \n# Terminal 3: Record a rosbag (ctrl+c to end recording)\nros2 bag record -a\n\n\
  # Terminal 4: Use keyboard to drive robot around world\nros2 run teleop_twist_keyboard\
  \ teleop_twist_keyboard\n\n# Verify: Play back rosbag after recording it in a loop\n\
  ros2 bag play --loop /path/to/bag/directory/\n"
results:
- result:
    category: edge
    datasource: perception/image3
    hardware: 12th Gen Intel(R) Core(TM) i9-12900KF
    metric: latency
    metric_unit: ms
    note: 'Mean: 26.25 ms,  RMS: 27.18 ms, Max: 132.12 ms, Min: 8.73 ms over 1124
      samples.'
    timestampt: 25-04-2023
    type: grey
    value: 132.12
- result:
    category: edge
    datasource: perception/image3
    hardware: NVIDIA AGX Orin Dev. Kit
    metric: throughput
    metric_unit: fps
    note: mean_benchmark 27.791574487768035, rms_benchmark 28.373919572519444, max_benchmark
      33.277046318720096, min_benchmark 10.077661482684006, lost messages 16.28 %
    timestampt: '2023-06-30 20:21:42'
    type: black
    value: 33.277046318720096
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: mean_benchmark 40.67432786374315, rms_benchmark 41.17130628578445, max_benchmark
      61.133489, min_benchmark 20.81411, lost messages 0.63 %
    timestampt: '2023-07-01 18:23:26'
    type: grey
    value: 61.133489
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-01 18:26:40'
    type: grey
    value: 5.897109508514404
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: mean_benchmark 9.985250716576333, rms_benchmark 10.005649079478957, max_benchmark
      12.975265148245784, min_benchmark 1.6551238056605884, lost messages 0.63 %
    timestampt: '2023-07-01 18:29:58'
    type: grey
    value: 12.975265148245784
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: mean_benchmark 22.975132699999996, rms_benchmark 26.949610502463365, max_benchmark
      59.300551, min_benchmark 7.832851, lost messages 0.00 %
    timestampt: '2023-07-01 18:33:18'
    type: grey
    value: 59.300551
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-01 18:36:30'
    type: grey
    value: 9.084548950195312
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: mean_benchmark 30.021894043899596, rms_benchmark 30.03041143308092, max_benchmark
      31.884678474583428, min_benchmark 28.689014184651903, lost messages 0.00 %
    timestampt: '2023-07-01 18:40:02'
    type: grey
    value: 31.884678474583428
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: latency
    metric_unit: ms
    note: mean_benchmark 22.797836120000003, rms_benchmark 26.96963921531789, max_benchmark
      64.159806, min_benchmark 8.604811999999999, lost messages 0.00 %
    timestampt: '2023-07-01 18:43:16'
    type: black
    value: 64.159806
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: power
    metric_unit: W
    note: ''
    timestampt: '2023-07-01 18:46:31'
    type: black
    value: 9.158670425415039
- result:
    category: workstation
    datasource: perception/image
    hardware: Intel i7-8700K
    metric: throughput
    metric_unit: fps
    note: mean_benchmark 30.085827751710223, rms_benchmark 30.09714182807465, max_benchmark
      34.36352784361543, min_benchmark 28.252331403576672, lost messages 0.00 %
    timestampt: '2023-07-01 18:49:44'
    type: black
    value: 34.36352784361543
- result:
    category: workstation
    datasource: perception/image
    hardware: AMD Ryzen 5 PRO 4650G
    metric: latency
    metric_unit: ms
    note: "\u270B mean_benchmark 32.3114033081862, rms_benchmark 34.68918659518702,\
      \ max_benchmark 142.15711000000002, min_benchmark 12.120403999999999, lost messages\
      \ 0.72 %"
    timestampt: '2023-07-04 20:07:57'
    type: grey
    value: 142.15711000000002
- result:
    category: workstation
    datasource: perception/image
    hardware: AMD Ryzen 5 PRO 4650G
    metric: power
    metric_unit: W
    note: "\u270B "
    timestampt: '2023-07-04 20:10:21'
    type: grey
    value: 4.991259574890137
short: Perception computational graph to compute a disparity map for stereo images.
